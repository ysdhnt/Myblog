<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>好きな曲ランキング</title>
  <link rel="stylesheet" href="ブログ.css">
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <link rel="icon" type="image/png" href="/img/favicon2.png">
</head>
<body>
  <header>
    <img src="/img/ホームアイコン.png" width="200px" height="70px"></a>
    <nav class="navigation">
        <h3><a href="index.html">Home</a></h3>
        <h3>About</h3>
        <h3>Contact</h3>
    </nav>
  </header>
  <div class="container">
   <main>
    <div class="main1">
      <h1 class="title">好きな曲ランキング</h1>
      <div class="toc-001">
          <div>目次</div>
          <ol>
            <li><a href="#section1">どんな風にランキング付けするのか</a></li>
            <li><a href="#section2">3位</a></li>
            <li><a href="#section3">2位</a></li>
            <li><a href="#section4">1位</a></li>
          </ol>
      </div>
      <h3 class="mini-title" id="section1">どんな風にランキング付けするのか</h3>
      <p class="explain">採点基準はいたって単純で、自分がよく聞いている曲とその回数、理由等を考慮して、総合的に判断していきます。</p>
      <div class="profile-comment">
        <img src="/img/プロフィール用アイコン2.png" alt="プロフィールアイコン" class="profile-icon">
        <div class="speech-bubble">メロディ、歌詞、雰囲気を5段階評価し、感想や理由も言っていきます。</div>
      </div>
      <h3 class="mini-title" id="section2">3位</h3>
      <div class="song-card">
        <img src="/img/Soranjiジャケット.jpeg" alt="ジャケット画像" class="song-jacket">
        <div class="song-info">
          <h3 class="song-title">Soranji</h3>
          <p class="song-artist">Mrs. GREEN APPLE</p>
      
          <div class="rating-section">
            <label>メロディ:</label>
            <div class="stars">⭐⭐⭐⭐☆</div>
          </div>
          <div class="rating-section">
            <label>歌詞:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>雰囲気:</label>
            <div class="stars">⭐⭐⭐⭐☆</div>
          </div>
          <div class="rating-section">
            <label>聴いた回数:</label>
            <div class="stars">677回</div>
          </div>
          <div class="comment-section">
            <label>感想・理由:</label>
            <p>「生きててほしい」という切実な願いが歌詞・メロディの細部に込められている。メロディは壮大さを感じさせられ、歌詞とのギャップがまた良い。</p>
          </div>
        </div>
      </div>
      <div class="profile-comment">
        <img src="/img/プロフィール用アイコン2.png" alt="プロフィールアイコン" class="profile-icon">
        <div class="speech-bubble">絶対1回は聞いてほしいなぁ。</div>
      </div>
      <h3 class="mini-title" id="section3">2位</h3>
      <div class="song-card">
        <img src="/img/青のすみかジャケット.jpg" alt="ジャケット画像" class="song-jacket">
        <div class="song-info">
          <h3 class="song-title">青のすみか</h3>
          <p class="song-artist">キタニタツヤ</p>
          <div class="rating-section">
            <label>メロディ:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>歌詞:</label>
            <div class="stars">⭐⭐⭐⭐☆</div>
          </div>
          <div class="rating-section">
            <label>雰囲気:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>聴いた回数:</label>
            <div class="stars">950回</div>
          </div>
          <div class="comment-section">
            <label>感想・理由:</label>
            <p>個人的に歌詞もいいですがやはりメロディや雰囲気が好きですね。「呪術廻戦 懐玉・玉折」を見た後だと歌詞のとらえ方、拍手の意味がまた違って感じられます。</p>
          </div>
        </div>
      </div>
      <div class="profile-comment">
        <img src="/img/プロフィール用アイコン2.png" alt="プロフィールアイコン" class="profile-icon">
        <div class="speech-bubble">呪術廻戦を見た後だとこの曲の歌詞の意味が大きく変わるのでおすすめです。</div>
      </div>
      <h3 class="mini-title" id="section4">1位</h3>
      <div class="song-card">
        <img src="/img/点描の唄ジャケット.jpg" alt="ジャケット画像" class="song-jacket">
        <div class="song-info">
          <h3 class="song-title">点描の唄</h3>
          <p class="song-artist">Mrs. GREEN APPLE</p>
          <div class="rating-section">
            <label>メロディ:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>歌詞:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>雰囲気:</label>
            <div class="stars">⭐⭐⭐⭐⭐</div>
          </div>
          <div class="rating-section">
            <label>聴いた回数:</label>
            <div class="stars">1627回</div>
          </div>
          <div class="comment-section">
            <label>感想・理由:</label>
            <p>もう全部が大好きです。個人的にメロディ・歌詞・雰囲気すべてのシナジーがとんでもないことになってる。青春・恋愛のすべてがこの曲に詰まっているといっても過言ではない。</p>
          </div>
        </div>
      </div>
      <div class="profile-comment">
        <img src="/img/プロフィール用アイコン2.png" alt="プロフィールアイコン" class="profile-icon">
        <div class="speech-bubble">今後この曲を超える曲に出会うことはあるのだろうか…。</div>
      </div>
      <button id="likeBtn">
        <img src="/img/いいね画像.png" id="likeIcon" width="30" />
        <span id="likeCount">0</span>
      </button>
      <div class="comment-box">
        <h2>コメントを書く</h2>
        <input type="text" id="username" placeholder="名前を入力" />
        <textarea id="message" placeholder="コメントを入力"></textarea>
        <button onclick="postComment()">送信</button>
      <h3>みんなのコメント（投稿順）</h3>
      <div id="comments"></div>
      </div>
   </main>
       <aside>
         <h3>プロフィール</h3>
         <div class="picture">
          <img src="/img/プロフィール用アイコン2.png" width="100px" height="100px"></a>
          <p class="name">マイルドマインド</p>
         </div>
         <p>こんにちは！UI/UXデザインの練習中の大学1年生です。日常や気になったニュース、好きなものなど、じゃんじゃん記事にしていきます！</p>
         <h3>人気記事</h3>
         <ul>
           <li>今後追加予定</li>
           <li>今後追加予定</li>
           <li>今後追加予定</li>
         </ul>
       </aside>
      </div>
  </div>
  <script type="module" src="ブログ.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import {
      getDatabase,
      ref,
      onValue,
      runTransaction
    } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"; // ←これ追加！
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
  
    const firebaseConfig = {
      apiKey: "AIzaSyA974kQAXG_l3j2EP0wSRs_M-P8BAhjYvk",
      authDomain: "my-blog-comments-31d2a.firebaseapp.com",
      projectId: "my-blog-comments-31d2a",
      storageBucket: "my-blog-comments-31d2a.firebasestorage.app",
      messagingSenderId: "947054447547",
      appId: "1:947054447547:web:1a5599ae0e1638c5c7929e",
      databaseURL: "https://my-blog-comments-31d2a-default-rtdb.asia-southeast1.firebasedatabase.app"
    };
  
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
  
    const articleId = new URLSearchParams(window.location.search).get("id") || "default";
    const likeRef = ref(db, `likes/${articleId}`);
  
    // いいね数をリアルタイムで更新
    onValue(likeRef, (snapshot) => {
      const data = snapshot.val() || 0;
      document.getElementById("likeCount").textContent = data;
    });
  
    document.getElementById("likeBtn").addEventListener("click", () => {
      runTransaction(likeRef, (current) => (current || 0) + 1);
      const icon = document.getElementById("likeIcon");
      icon.src = "/img/いいね画像.png"; // アニメーション画像に一時的に変更
      setTimeout(() => {
        icon.src = "/img/いいね画像.png"; // 元に戻す
      }, 800);
    });
  </script>  
</body>